<?php\n\n/**\n * ForgePulse v1.2.0 - Advanced Conditional Operators Examples\n *\n * This file demonstrates the new advanced conditional operators introduced in v1.2.0.\n */\n\nrequire __DIR__ . '/../vendor/autoload.php';\n\nuse AlizHarb\\ForgePulse\\Models\\Workflow;\nuse AlizHarb\\ForgePulse\\Enums\\WorkflowStatus;\nuse AlizHarb\\ForgePulse\\Enums\\StepType;\n\necho \"\\n=== ForgePulse v1.2.0 - Advanced Conditional Operators ===\\n\\n\";\n\n$workflow = Workflow::create([\n    'name' => 'Advanced Conditions Demo',\n    'description' => 'Demonstrating v1.2.0 conditional operators',\n    'status' => WorkflowStatus::ACTIVE,\n]);\n\n// Example 1: Regex Pattern Matching\necho \"1. Regex Pattern Matching\\n\";\n$step1 = $workflow->steps()->create([\n    'name' => 'Validate Email Domain',\n    'type' => StepType::CONDITION,\n    'position' => 1,\n    'conditions' => [\n        'operator' => 'and',\n        'rules' => [\n            [\n                'field' => 'user.email',\n                'operator' => 'regex',\n                'value' => '/^[a-z0-9._%+-]+@company\\.com$/i',\n            ],\n        ],\n    ],\n]);\necho \"   Created: Email must match company domain pattern\\n\\n\";\n\n// Example 2: Range Checks (Between)\necho \"2. Range Checks\\n\";\n$step2 = $workflow->steps()->create([\n    'name' => 'Check Age Range',\n    'type' => StepType::CONDITION,\n    'position' => 2,\n    'conditions' => [\n        'operator' => 'and',\n        'rules' => [\n            [\n                'field' => 'user.age',\n                'operator' => 'between',\n                'value' => [18, 65],\n            ],\n        ],\n    ],\n]);\necho \"   Created: Age must be between 18 and 65\\n\\n\";\n\n// Example 3: Array Membership (in_array)\necho \"3. Array Membership\\n\";\n$step3 = $workflow->steps()->create([\n    'name' => 'Check User Roles',\n    'type' => StepType::CONDITION,\n    'position' => 3,\n    'conditions' => [\n        'operator' => 'or',\n        'rules' => [\n            [\n                'field' => 'user.roles',\n                'operator' => 'in_array',\n                'value' => 'admin',\n            ],\n            [\n                'field' => 'user.roles',\n                'operator' => 'in_array',\n                'value' => 'moderator',\n            ],\n        ],\n    ],\n]);\necho \"   Created: User must have admin or moderator role\\n\\n\";\n\n// Example 4: Array Subset Checks (contains_all)\necho \"4. Array Subset Checks\\n\";\n$step4 = $workflow->steps()->create([\n    'name' => 'Check Required Permissions',\n    'type' => StepType::CONDITION,\n    'position' => 4,\n    'conditions' => [\n        'operator' => 'and',\n        'rules' => [\n            [\n                'field' => 'user.permissions',\n                'operator' => 'contains_all',\n                'value' => ['read', 'write', 'delete'],\n            ],\n        ],\n    ],\n]);\necho \"   Created: User must have all required permissions\\n\\n\";\n\n// Example 5: Array Intersection (contains_any)\necho \"5. Array Intersection\\n\";\n$step5 = $workflow->steps()->create([\n    'name' => 'Check Any Premium Feature',\n    'type' => StepType::CONDITION,\n    'position' => 5,\n    'conditions' => [\n        'operator' => 'and',\n        'rules' => [\n            [\n                'field' => 'user.features',\n                'operator' => 'contains_any',\n                'value' => ['premium_support', 'priority_queue', 'advanced_analytics'],\n            ],\n        ],\n    ],\n]);\necho \"   Created: User must have at least one premium feature\\n\\n\";\n\n// Example 6: Length Comparisons\necho \"6. Length Comparisons\\n\";\n$step6 = $workflow->steps()->create([\n    'name' => 'Validate Description Length',\n    'type' => StepType::CONDITION,\n    'position' => 6,\n    'conditions' => [\n        'operator' => 'and',\n        'rules' => [\n            [\n                'field' => 'product.description',\n                'operator' => 'length_gt',\n                'value' => 50,\n            ],\n            [\n                'field' => 'product.description',\n                'operator' => 'length_lt',\n                'value' => 500,\n            ],\n        ],\n    ],\n]);\necho \"   Created: Description must be between 50 and 500 characters\\n\\n\";\n\n// Example 7: Complex Nested Conditions\necho \"7. Complex Nested Conditions\\n\";\n$step7 = $workflow->steps()->create([\n    'name' => 'Premium User Validation',\n    'type' => StepType::CONDITION,\n    'position' => 7,\n    'conditions' => [\n        'operator' => 'and',\n        'rules' => [\n            [\n                'field' => 'user.email',\n                'operator' => 'regex',\n                'value' => '/^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$/i',\n            ],\n            [\n                'field' => 'user.subscription_amount',\n                'operator' => 'between',\n                'value' => [50, 500],\n            ],\n            [\n                'field' => 'user.permissions',\n                'operator' => 'contains_all',\n                'value' => ['api_access', 'export_data'],\n            ],\n            [\n                'operator' => 'or',\n                'rules' => [\n                    [\n                        'field' => 'user.tags',\n                        'operator' => 'in_array',\n                        'value' => 'vip',\n                    ],\n                    [\n                        'field' => 'user.referrals',\n                        'operator' => 'length_gt',\n                        'value' => 5,\n                    ],\n                ],\n            ],\n        ],\n    ],\n]);\necho \"   Created: Complex validation with nested conditions\\n\\n\";\n\n// Example 8: Not Operators\necho \"8. Negative Operators\\n\";\n$step8 = $workflow->steps()->create([\n    'name' => 'Exclude Test Users',\n    'type' => StepType::CONDITION,\n    'position' => 8,\n    'conditions' => [\n        'operator' => 'and',\n        'rules' => [\n            [\n                'field' => 'user.email',\n                'operator' => 'not_regex',\n                'value' => '/^test.*@/',\n            ],\n            [\n                'field' => 'user.age',\n                'operator' => 'not_between',\n                'value' => [0, 17],\n            ],\n            [\n                'field' => 'user.roles',\n                'operator' => 'not_in_array',\n                'value' => 'banned',\n            ],\n        ],\n    ],\n]);\necho \"   Created: Exclude test users, minors, and banned users\\n\\n\";\n\n// Summary\necho \"=== Summary ===\\n\";\necho \"Created {$workflow->steps->count()} conditional steps demonstrating:\\n\";\necho \"  - Regex pattern matching (regex, not_regex)\\n\";\necho \"  - Range checks (between, not_between)\\n\";\necho \"  - Array membership (in_array, not_in_array)\\n\";\necho \"  - Array subset checks (contains_all, contains_any)\\n\";\necho \"  - Length comparisons (length_eq, length_gt, length_lt)\\n\";\necho \"  - Complex nested conditions\\n\";\necho \"\\nAll operators are now available in your workflows!\\n\\n\";\n
